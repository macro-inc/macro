{
  "db_name": "PostgreSQL",
  "query": "\n        SELECT\n                sp.id as id,\n                sp.\"isPublic\" as is_public,\n                sp.\"publicAccessLevel\" as \"public_access_level?\",\n                m.\"user_id\" as owner,\n                COALESCE(\n                    json_agg(json_build_object(\n                        'channel_id', csp.\"channel_id\",\n                        'access_level', csp.\"access_level\"\n                    )) FILTER (WHERE csp.\"channel_id\" IS NOT NULL),\n                    '[]'\n                ) as \"channel_share_permissions?\"\n            FROM\n                \"MacroPromptPermission\" mpp\n            JOIN \"SharePermission\" sp ON mpp.\"share_permission_id\" = sp.id\n            JOIN \"MacroPrompt\" m ON mpp.\"macro_prompt_id\" = m.id\n            LEFT JOIN \"ChannelSharePermission\" csp ON csp.\"share_permission_id\" = sp.id\n            WHERE\n                mpp.\"macro_prompt_id\" = $1\n            GROUP BY\n                sp.id, m.\"user_id\"\n        ",
  "describe": {
    "columns": [
      {
        "ordinal": 0,
        "name": "id",
        "type_info": "Text"
      },
      {
        "ordinal": 1,
        "name": "is_public",
        "type_info": "Bool"
      },
      {
        "ordinal": 2,
        "name": "public_access_level?",
        "type_info": "Text"
      },
      {
        "ordinal": 3,
        "name": "owner",
        "type_info": "Text"
      },
      {
        "ordinal": 4,
        "name": "channel_share_permissions?",
        "type_info": "Json"
      }
    ],
    "parameters": {
      "Left": [
        "Text"
      ]
    },
    "nullable": [
      false,
      false,
      true,
      false,
      null
    ]
  },
  "hash": "a5801ca350ee73d531d912e4dcc1935265af572afbbf60702a4521e4c19b8468"
}
