{
  "db_name": "PostgreSQL",
  "query": "\n        SELECT\n            'document' as \"item_type!\",\n            d.id as \"id!\",\n            CAST(COALESCE(di.id, db.id) as TEXT) as \"document_version_id\",\n            d.owner as \"user_id!\",\n            d.name as \"name!\",\n            d.\"fileType\" as \"file_type\",\n            d.\"createdAt\"::timestamptz as \"created_at\",\n            d.\"updatedAt\"::timestamptz as \"updated_at\",\n            d.\"deletedAt\"::timestamptz as \"deleted_at\",\n            d.\"projectId\" as \"project_id\",\n            NULL as \"is_persistent\"\n        FROM \"Document\" d\n        LEFT JOIN LATERAL (\n            SELECT\n                b.id\n            FROM\n                \"DocumentBom\" b\n            WHERE\n                b.\"documentId\" = d.id\n            ORDER BY\n                b.\"createdAt\" DESC\n            LIMIT 1\n        ) db ON true\n        LEFT JOIN LATERAL (\n            SELECT\n                i.id\n            FROM\n                \"DocumentInstance\" i\n            WHERE\n                i.\"documentId\" = d.id\n            ORDER BY\n                i.\"updatedAt\" DESC\n            LIMIT 1\n        ) di ON true\n        WHERE d.owner = $1 AND d.\"deletedAt\" IS NOT NULL\n        UNION ALL\n        SELECT\n            'chat' as \"item_type!\",\n            c.id as \"id!\",\n            NULL as \"document_version_id\",\n            c.\"userId\" as \"user_id!\",\n            c.name as \"name!\",\n            NULL as \"file_type\",\n            c.\"createdAt\"::timestamptz as \"created_at\",\n            c.\"updatedAt\"::timestamptz as \"updated_at\",\n            c.\"deletedAt\"::timestamptz as \"deleted_at\",\n            c.\"projectId\" as \"project_id\",\n            c.\"isPersistent\" as \"is_persistent\"\n        FROM \"Chat\" c\n        WHERE c.\"userId\" = $1 AND c.\"deletedAt\" IS NOT NULL\n        UNION ALL\n        SELECT\n            'project' as \"item_type!\",\n            p.id as \"id!\",\n            NULL as \"document_version_id\",\n            p.\"userId\" as \"user_id!\",\n            p.name as \"name!\",\n            NULL as \"file_type\",\n            p.\"createdAt\"::timestamptz as \"created_at\",\n            p.\"updatedAt\"::timestamptz as \"updated_at\",\n            p.\"deletedAt\"::timestamptz as \"deleted_at\",\n            p.\"parentId\" as \"project_id\",\n            NULL as \"is_persistent\"\n        FROM \"Project\" p\n        WHERE p.\"userId\" = $1 AND p.\"deletedAt\" IS NOT NULL\n    ORDER BY deleted_at DESC\n    ",
  "describe": {
    "columns": [
      {
        "ordinal": 0,
        "name": "item_type!",
        "type_info": "Text"
      },
      {
        "ordinal": 1,
        "name": "id!",
        "type_info": "Text"
      },
      {
        "ordinal": 2,
        "name": "document_version_id",
        "type_info": "Text"
      },
      {
        "ordinal": 3,
        "name": "user_id!",
        "type_info": "Text"
      },
      {
        "ordinal": 4,
        "name": "name!",
        "type_info": "Text"
      },
      {
        "ordinal": 5,
        "name": "file_type",
        "type_info": "Text"
      },
      {
        "ordinal": 6,
        "name": "created_at",
        "type_info": "Timestamptz"
      },
      {
        "ordinal": 7,
        "name": "updated_at",
        "type_info": "Timestamptz"
      },
      {
        "ordinal": 8,
        "name": "deleted_at",
        "type_info": "Timestamptz"
      },
      {
        "ordinal": 9,
        "name": "project_id",
        "type_info": "Text"
      },
      {
        "ordinal": 10,
        "name": "is_persistent",
        "type_info": "Bool"
      }
    ],
    "parameters": {
      "Left": [
        "Text"
      ]
    },
    "nullable": [
      null,
      null,
      null,
      null,
      null,
      null,
      null,
      null,
      null,
      null,
      null
    ]
  },
  "hash": "56760728c44729a4ba166cda98fee580b844bd74d297f2016a50a079258ea44e"
}
